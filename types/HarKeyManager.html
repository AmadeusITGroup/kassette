<!DOCTYPE html><html class="default" lang="en"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>HarKeyManager | @amadeus-it-group/kassette</title><meta name="description" content="Documentation for @amadeus-it-group/kassette"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base=".."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">@amadeus-it-group/kassette</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../modules.html">@amadeus-it-group/kassette</a></li><li><a href="HarKeyManager.html">HarKeyManager</a></li></ul><h1>Type Alias HarKeyManager</h1></div><div class="tsd-signature"><span class="tsd-kind-type-alias">Har<wbr/>Key<wbr/>Manager</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">entry</span><span class="tsd-signature-symbol">: </span><a href="../interfaces/HarFormatEntry.html" class="tsd-signature-type tsd-kind-interface">HarFormatEntry</a>, <span class="tsd-kind-parameter">key</span><span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol"> =&gt; </span><a href="RecursiveArray.html" class="tsd-signature-type tsd-kind-type-alias">RecursiveArray</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-type">null</span><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-type">undefined</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">)</span></div><div class="tsd-comment tsd-typography"><p>Each entry in a har file is supposed to have a corresponding unique key (a string).
The har key manager is both a getter and a setter for the key of an entry.</p>
</div><div class="tsd-comment tsd-typography"><h4 class="tsd-anchor-link"><a id="Remarks" class="tsd-anchor"></a>Remarks<a href="#Remarks" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>The har key manager is a function that is called either to get the key of an entry (when
the key parameter is undefined) or to set it (when the key parameter is defined).</p>
<p>It should not modify the entry when the key parameter is undefined.</p>
<p>When the key parameter is defined, the har key manager is supposed to change the provided entry, in order to store the
key in it, because after the call, the entry will be persisted in the har file. In this case, the key parameter either
comes from a call to <a href="../interfaces/IMock.html#setMockHarKey" class="tsd-kind-method">IMock.setMockHarKey</a>, or from <a href="../interfaces/IMock.html#defaultMockHarKey" class="tsd-kind-property">defaultMockHarKey</a>.</p>
<p>In order to compute the <a href="../interfaces/IMock.html#defaultMockHarKey" class="tsd-kind-property">defaultMockHarKey</a> property, the har key manager
is called with an entry that includes the request but not the response (and with an undefined key parameter).</p>
<p>In all cases, the har key manager is expected to return the key of the entry. If an array is returned (which can
be nested), it is flattened with null items removed, and joined with forward slashes to produce a string.</p>
<p>The default har key manager is expected to work fine for most use cases, especially when working with a har file recorded
with kassette. With the default har key manager, if a key is set with <a href="../interfaces/IMock.html#setMockHarKey" class="tsd-kind-method">IMock.setMockHarKey</a>, it is stored in the
<a href="../interfaces/HarFormatEntry.html#_kassetteMockKey" class="tsd-kind-property">_kassetteMockKey</a> field. Otherwise, the default key is the concatenation of the request
method and url, with a separating forward slash. It can be useful to replace the default har key manager with a custom one especially
when working with har files that are produced by other applications than kassette, if the default key is not convenient.</p>
<h4 class="tsd-anchor-link"><a id="Example" class="tsd-anchor"></a>Example<a href="#Example" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Here is the default har key manager:</p>
<pre><code class="ts"><span class="hl-5">export</span><span class="hl-3"> </span><span class="hl-1">const</span><span class="hl-3"> </span><span class="hl-4">defaultHarKeyManager</span><span class="hl-3">: </span><span class="hl-2">HarKeyManager</span><span class="hl-3"> = (</span><span class="hl-6">entry</span><span class="hl-3">: </span><span class="hl-2">HarFormatEntry</span><span class="hl-3">, </span><span class="hl-6">key</span><span class="hl-3">?: </span><span class="hl-2">string</span><span class="hl-3">) </span><span class="hl-1">=&gt;</span><span class="hl-3"> {</span><br/><span class="hl-3">  </span><span class="hl-1">const</span><span class="hl-3"> </span><span class="hl-9">defaultKey</span><span class="hl-3"> = </span><span class="hl-4">joinPath</span><span class="hl-3">(</span><span class="hl-6">entry</span><span class="hl-3">.</span><span class="hl-6">_kassetteMockKey</span><span class="hl-3"> ?? [</span><span class="hl-6">entry</span><span class="hl-3">.</span><span class="hl-6">request</span><span class="hl-3">?.</span><span class="hl-6">method</span><span class="hl-3">, </span><span class="hl-6">entry</span><span class="hl-3">.</span><span class="hl-6">request</span><span class="hl-3">?.</span><span class="hl-6">url</span><span class="hl-3">]);</span><br/><span class="hl-3">  </span><span class="hl-5">if</span><span class="hl-3"> (</span><span class="hl-6">key</span><span class="hl-3"> &amp;&amp; </span><span class="hl-6">key</span><span class="hl-3"> !== </span><span class="hl-6">defaultKey</span><span class="hl-3">) {</span><br/><span class="hl-3">    </span><span class="hl-6">entry</span><span class="hl-3">.</span><span class="hl-6">_kassetteMockKey</span><span class="hl-3"> = </span><span class="hl-6">key</span><span class="hl-3">;</span><br/><span class="hl-3">    </span><span class="hl-5">return</span><span class="hl-3"> </span><span class="hl-6">key</span><span class="hl-3">;</span><br/><span class="hl-3">  }</span><br/><span class="hl-3">  </span><span class="hl-5">return</span><span class="hl-3"> </span><span class="hl-6">defaultKey</span><span class="hl-3">;</span><br/><span class="hl-3">};</span>
</code><button type="button">Copy</button></pre>

</div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/AmadeusITGroup/kassette/blob/e77165949e98098db0e9c78f8be5c44d71d682ab/packages/lib/har/harFile.ts#L84">lib/har/harFile.ts:84</a></li></ul></aside></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div></div><div class="site-menu"><nav class="tsd-navigation"><a href="../modules.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1"></use></svg><span>@amadeus-it-group/kassette</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base=".."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
