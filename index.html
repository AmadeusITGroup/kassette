<!DOCTYPE html><html class="default" lang="en"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>@amadeus-it-group/kassette</title><meta name="description" content="Documentation for @amadeus-it-group/kassette"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">@amadeus-it-group/kassette</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h2>@amadeus-it-group/kassette</h2></div><div class="tsd-panel tsd-typography"><a id="md:kassette" class="tsd-anchor"></a><h1 class="tsd-anchor-link">kassette<a href="#md:kassette" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p><a href="https://www.npmjs.com/package/@amadeus-it-group/kassette"><img src="https://img.shields.io/npm/v/@amadeus-it-group/kassette" alt="npm"></a>
<a href="https://codecov.io/gh/AmadeusITGroup/kassette"><img src="https://codecov.io/gh/AmadeusITGroup/kassette/branch/master/graph/badge.svg" alt="codecov"></a></p>
<p align="center">
  <img src="https://raw.githubusercontent.com/AmadeusITGroup/kassette/master/doc/assets/images/kassette-logo.png" alt="kassette-logo" width="200px" height="90px"/>
  <br>
  <i>kassette is a development server, used mainly for testing, which proxies requests and
    <br>is able to easily manage local mocks.</i>
  <br>
</p>
<p>To use it:</p>
<ul>
<li>install with <code>npm install @amadeus-it-group/kassette</code></li>
<li>add this command to your <code>package.json</code> scripts: <code>kassette -c kassette.config.js</code></li>
<li>and create the configuration file <code>kassette.config.js</code>:</li>
</ul>
<pre><code class="javascript"><span class="hl-0">/**</span><br/><span class="hl-0"> * </span><span class="hl-1">@return</span><span class="hl-0"> </span><span class="hl-2">{ import(&quot;@amadeus-it-group/kassette&quot;).ConfigurationSpec }</span><br/><span class="hl-0"> */</span><br/><span class="hl-2">exports</span><span class="hl-3">.</span><span class="hl-4">getConfiguration</span><span class="hl-3"> = () </span><span class="hl-1">=&gt;</span><span class="hl-3"> {</span><br/><span class="hl-3">  </span><span class="hl-5">return</span><span class="hl-3"> {</span><br/><span class="hl-3">    </span><span class="hl-6">port:</span><span class="hl-3"> </span><span class="hl-7">4200</span><span class="hl-3">,</span><br/><span class="hl-3">    </span><span class="hl-6">mocksFolder:</span><span class="hl-3"> </span><span class="hl-8">&#39;./mocks-folder&#39;</span><span class="hl-3">,</span><br/><span class="hl-3">    </span><span class="hl-6">remoteURL:</span><span class="hl-3"> </span><span class="hl-8">&#39;http://127.0.0.1:3000&#39;</span><span class="hl-3">,</span><br/><span class="hl-3">    </span><span class="hl-6">mode:</span><span class="hl-3"> </span><span class="hl-8">&#39;local_or_download&#39;</span><span class="hl-3">,</span><br/><br/><span class="hl-3">    </span><span class="hl-4">hook</span><span class="hl-6">:</span><span class="hl-3"> </span><span class="hl-1">async</span><span class="hl-3"> ({ </span><span class="hl-6">mock</span><span class="hl-3"> }) </span><span class="hl-1">=&gt;</span><span class="hl-3"> {</span><br/><span class="hl-3">      </span><span class="hl-5">if</span><span class="hl-3"> (!</span><span class="hl-6">mock</span><span class="hl-3">.</span><span class="hl-6">request</span><span class="hl-3">.</span><span class="hl-6">pathname</span><span class="hl-3">.</span><span class="hl-4">startsWith</span><span class="hl-3">(</span><span class="hl-8">&#39;/api/&#39;</span><span class="hl-3">)) {</span><br/><span class="hl-3">        </span><span class="hl-6">mock</span><span class="hl-3">.</span><span class="hl-4">setMode</span><span class="hl-3">(</span><span class="hl-8">&#39;remote&#39;</span><span class="hl-3">);</span><br/><span class="hl-3">        </span><span class="hl-5">return</span><span class="hl-3">;</span><br/><span class="hl-3">      }</span><br/><br/><span class="hl-3">      </span><span class="hl-6">mock</span><span class="hl-3">.</span><span class="hl-4">setLocalPath</span><span class="hl-3">([</span><span class="hl-6">mock</span><span class="hl-3">.</span><span class="hl-6">request</span><span class="hl-3">.</span><span class="hl-6">pathname</span><span class="hl-3">.</span><span class="hl-4">split</span><span class="hl-3">(</span><span class="hl-8">&#39;/&#39;</span><span class="hl-3">).</span><span class="hl-4">slice</span><span class="hl-3">(</span><span class="hl-7">1</span><span class="hl-3">), </span><span class="hl-6">mock</span><span class="hl-3">.</span><span class="hl-6">request</span><span class="hl-3">.</span><span class="hl-6">method</span><span class="hl-3">]);</span><br/><span class="hl-3">    },</span><br/><span class="hl-3">  };</span><br/><span class="hl-3">};</span>
</code><button type="button">Copy</button></pre>

<p>Now run your script to launch the proxy!</p>
<p>With this configuration, input requests targeting URLs starting with <code>/api/</code> will get processed, and local mocks will be used if present, otherwise data will be downloaded from <code>http://127.0.0.1:3000</code> with a forwarded request, persisted and used for future input requests.</p>
<p>Note that kassette can also be configured to run as a browser proxy, reading the target URL from the request, and intercepting HTTPS communications.</p>
<p>Check <a href="https://github.com/AmadeusITGroup/kassette/blob/master/doc/getting-started.md"><em>Getting started</em></a> to learn more.</p>
<a id="md:main-features" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Main features<a href="#md:main-features" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li>optionally forward requests to a remote backend</li>
<li>record backend responses for later use</li>
<li>easily computed and set local mock path</li>
<li>fill response to client from backend response, downloaded or persisted</li>
<li>modify response to client manually</li>
<li>can optionally act as the browser proxy</li>
<li>generate TLS certificates on the fly to intercept HTTPS communications (as a man-in-the-middle)</li>
<li>integrates nicely into your editor and source control: a simple hierarchy of files is generated in a clean way for inspection, edition, diffing, etc.</li>
<li>supports the <a href="http://www.softwareishard.com/blog/har-12-spec/">HAR format</a> to record and replay mocks, either in JSON or in YAML</li>
<li>supports HTTP/1.x and HTTP/2.0 both in client and server</li>
</ul>
<a id="md:installation" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Installation<a href="#md:installation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>This is a Node.js project using npm for dependency management, so ensure you have those two properly installed. Node.js LTS onwards is supported.</p>
<p>With npm, you can install it in two locations:</p>
<ul>
<li>locally inside your project and run it the usual way (<strong>using a npm script</strong> or accessing the path explicitly <code>node_modules/.bin/kassette</code>)</li>
<li>or install it globally and run it using the command <code>kassette</code> (not advised for self-contained projects)</li>
</ul>
<p>Besides where it is installed, you have at least two ways to install it:</p>
<ul>
<li>from the npm registry: package's name is <code>@amadeus-it-group/kassette</code></li>
<li>from a git clone (see below)</li>
</ul>
<a id="md:installing-from-a-git-clone" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Installing from a git clone<a href="#md:installing-from-a-git-clone" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Clone this repository, and run <code>npm link</code> to install it globally on your computer.</p>
<p>If you want to use it globally only, then there is nothing more to do.</p>
<p>If you want to install it locally though, you need to add one more step. You won't be able to use a <code>package.json</code> dependency, but you can install it manually using <code>npm link @amadeus-it-group/kassette</code> from inside your project.</p>
<a id="md:user-documentation" class="tsd-anchor"></a><h2 class="tsd-anchor-link">User documentation<a href="#md:user-documentation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>It is advised to start with the <a href="https://github.com/AmadeusITGroup/kassette/blob/master/doc/getting-started.md"><em>Getting started</em></a> article which describes a few practical usage examples, then check the <a href="https://github.com/AmadeusITGroup/kassette/blob/master/doc/configuration.md">configuration guide</a> and the <a href="https://github.com/AmadeusITGroup/kassette/blob/master/doc/api.md">API guide</a>. The <a href="https://amadeusitgroup.github.io/kassette/">API reference</a> is also available.</p>
<a id="md:developing--contributing" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Developing / Contributing<a href="#md:developing--contributing" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>See <a href="https://github.com/AmadeusITGroup/kassette/blob/master/DEVELOPER.md">developer guide</a> for details.</p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:kassette"><span>kassette</span></a><ul><li><a href="#md:main-features"><span>Main features</span></a></li><li><a href="#md:installation"><span>Installation</span></a></li><li><ul><li><a href="#md:installing-from-a-git-clone"><span>Installing from a git clone</span></a></li></ul></li><li><a href="#md:user-documentation"><span>User documentation</span></a></li><li><a href="#md:developing--contributing"><span>Developing / <wbr/>Contributing</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html" class="current"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="assets/icons.svg#icon-1"></use></svg><span>@amadeus-it-group/kassette</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base="."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
